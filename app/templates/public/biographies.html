{% macro vida(e) -%}
{%
if e.birth_year and e.death_year
%}({{ e.birth_year }} - {{ e.death_year }}){%
elif e.birth_year and not e.death_year
%}( {{ e.birth_year }} - ){%
elif not e.birth_year and e.death_year
%}( - {{ e.death_year }}){%
endif
%}
{%- endmacro %}

{% extends 'public/layout_global.html' %}

{% set title=_('Biograf√≠as') %}
{% set sidebar='public/sidebar_bio.html' %}

{% block content %}

<h2>{{ title }}</h2>

<div class="card">
    <div class="card-header">
        {{_("Personas")}}
    </div>

    <div class="card-body">
        {% for x in bio_persons %}
        <p>
            <strong><a href="{{ url_for('public.bio_id', id=x.id) }}">
                    {{ x.person.first_name }} {{ x.person.last_name }}</a></strong>
            {{ vida(x.person) }}
            <br>
            {% if x.person.biography %}
            {{ x.person.biography|replace('.', '')|safe }}.
            {% endif %}
            {{ x.biografia|truncate(270,False)|safe }}
            <a href="{{ url_for('public.bio_id', id=x.id) }}">{{_("Acceder")}} &gt;&gt;</a>
        </p>
        {% endfor %}
    </div>
</div>

<p></p>
<p></p>

<div class="card">
    <div class="card-header">
        {{_("Agrupaciones")}}
    </div>

    <div class="card-body">
        {% for x in bio_ensembles %}
        <p>
            <strong><a href="{{ url_for('public.bio_ensemble_id', id=x.id) }}">
                    {{ x.musical_ensemble.name }}</a></strong>
            <br>
            {{ x.biografia|truncate(300,False)|safe }}
            <a href="{{ url_for('public.bio_ensemble_id', id=x.id) }}">{{_("Acceder")}} &gt;&gt;</a>
        </p>
        {% endfor %}
    </div>
</div>


{% endblock %}